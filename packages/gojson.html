<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Go encoding/json Deep Guide</title>

<style>
:root {
  --bg: #ffffff;
  --text: #111111;
  --accent: #ff3b30;
  --muted: #666;
  --code-bg: #0f1f17;
  --keyword: #ff3b30;
  --type: #007aff;
  --string: #34c759;
  --number: #af52de;
}

body.dark {
  --bg: #0d0d0f;
  --text: #f5f5f7;
  --accent: #ff453a;
  --muted: #999;
  --code-bg: #0b1a14;
  --keyword: #ff453a;
  --type: #4da3ff;
  --string: #30d158;
  --number: #bf5af2;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 60px 30px;
  line-height: 1.7;
  transition: 0.2s ease;
}

.container {
  max-width: 850px;
  margin: auto;
}

.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40px;
}

button {
  background: transparent;
  border: 1px solid var(--muted);
  color: var(--text);
  padding: 6px 12px;
  cursor: pointer;
}

h1 { font-weight: 600; }
h2 { margin-top: 50px; font-weight: 500; }

.code-box {
  font-family: Menlo, monospace;
  background: var(--code-bg);
  padding: 18px;
  border-radius: 8px;
  margin: 20px 0;
  white-space: pre;
  overflow-x: auto;
  font-size: 0.95rem;
}

.keyword { color: var(--keyword); }
.type { color: var(--type); }
.string { color: var(--string); }
.number { color: var(--number); }
.muted { color: var(--muted); }

</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const saved = localStorage.getItem("theme");
  if (saved === "dark") document.body.classList.add("dark");

  document.getElementById("theme-toggle").onclick = () => {
    document.body.classList.toggle("dark");
    localStorage.setItem(
      "theme",
      document.body.classList.contains("dark") ? "dark" : "light"
    );
  };
});
</script>

</head>
<body>

<div class="container">

<div class="topbar">
  <h1>Go encoding/json — Deep Guide</h1>
  <button id="theme-toggle">Theme</button>
</div>

<p class="muted">
Complete internal reference for Go JSON handling.
</p>

<h2>1. Marshal — Struct → JSON</h2>

<div class="code-box">
<span class="keyword">type</span> <span class="type">User</span> <span class="keyword">struct</span> {
  ID   <span class="type">int</span>    <span class="string">`json:"id"`</span>
  Name <span class="type">string</span> <span class="string">`json:"name"`</span>
}

u := User{ID: 1, Name: "Rak"}

jsonBytes, err := json.Marshal(u)
</div>

<p>
Marshal converts a Go struct into JSON bytes.
Always returns <span class="type">[]byte</span>.
</p>

---

<h2>2. Unmarshal — JSON → Struct</h2>

<div class="code-box">
var u User
err := json.Unmarshal(jsonBytes, &u)
</div>

<p>
Unmarshal requires a pointer so it can modify the struct.
</p>

---

<h2>3. Struct Tags</h2>

<div class="code-box">
ID int <span class="string">`json:"user_id"`</span>
</div>

<p>
Changes JSON key name.
Without tag, JSON key becomes the struct field name.
</p>

---

<h2>4. omitempty</h2>

<div class="code-box">
Name string <span class="string">`json:"name,omitempty"`</span>
</div>

<p>
If value is zero-value, field will not appear in JSON output.
</p>

---

<h2>5. json:"-" (Ignore Field)</h2>

<div class="code-box">
Password string <span class="string">`json:"-"`</span>
</div>

<p>
Field is completely ignored in both Marshal and Unmarshal.
</p>

---

<h2>6. ,string Modifier</h2>

<div class="code-box">
ID int <span class="string">`json:"id,string"`</span>
</div>

<p>
Allows JSON to contain:
</p>

<div class="code-box">
{
  <span class="string">"id"</span>: <span class="string">"200"</span>
}
</div>

<p>
And converts string → int automatically.
</p>

---

<h2>7. Zero Values</h2>

<table>
<tr><td>int</td><td>0</td></tr>
<tr><td>string</td><td>""</td></tr>
<tr><td>bool</td><td>false</td></tr>
<tr><td>slice</td><td>nil</td></tr>
<tr><td>map</td><td>nil</td></tr>
</table>

<p>
Missing JSON fields become zero values.
</p>

---

<h2>8. Slices</h2>

<div class="code-box">
Tags []string <span class="string">`json:"tags"`</span>
</div>

JSON must look like:

<div class="code-box">
{
  "tags": ["go", "backend"]
}
</div>

nil slice → null  
empty slice → []

Important difference.

---

<h2>9. map[string]any</h2>

<div class="code-box">
var data map[string]any
json.Unmarshal(jsonBytes, &data)
</div>

<p>
JSON numbers become <span class="type">float64</span> in generic maps.
</p>

---

<h2>10. Disallow Unknown Fields</h2>

<div class="code-box">
decoder := json.NewDecoder(reader)
decoder.DisallowUnknownFields()
decoder.Decode(&u)
</div>

<p>
For strict APIs. Rejects unexpected keys.
</p>

---

<h2>11. MarshalIndent</h2>

<div class="code-box">
pretty, _ := json.MarshalIndent(u, "", "  ")
</div>

<p>
Creates formatted JSON for debugging.
</p>

---

<h2>12. Field Must Be Exported</h2>

<div class="code-box">
type User struct {
  ID int
  id int  // ignored
}
</div>

<p>
JSON only sees capitalized fields.
</p>

---

<h2>13. Duplicate JSON Keys</h2>

<div class="code-box">
{"id":1,"id":2}
</div>

<p>
Last value wins.
Final ID = 2.
</p>

---

<h2>14. Nested Struct</h2>

<div class="code-box">
type Profile struct {
  Age int <span class="string">`json:"age"`</span>
}

type User struct {
  ID int <span class="string">`json:"id"`</span>
  Profile Profile <span class="string">`json:"profile"`</span>
}
</div>

JSON:

<div class="code-box">
{
  "id": 1,
  "profile": { "age": 21 }
}
</div>

---

<h2>15. Mental Model</h2>

<p>
JSON object → struct or map  
JSON array → slice  
JSON string → string  
JSON number → float64 (generic) or int (typed struct)  
JSON boolean → bool  
</p>

---

<p class="muted" style="text-align: center;">
 &#169;Rakshith
</p>

</div>
</body>
</html>